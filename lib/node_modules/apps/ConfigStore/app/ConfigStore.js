!function(){"use strict";var n=require("BoxApplication"),o=require("mongodb"),a=require("./config.js"),e=n(a);e.register(a.name,function(n){n&&e.error("Failed to register application name!")}),o.MongoClient.connect("mongodb://localhost/ConfigStore",function(n,o){var a=o.collection("configStore");e.on("config:setParameter",function(n,o){var e=n.app,t=n.param,r=n.value;a.update({app:e,param:t},{$set:{app:e,param:t,value:r}},{upsert:!0},function(n){o(n)})}),e.on("config:getParameter",function(n,o){var e=n.app,t=n.param;a.findOne({app:e,param:t},function(n,a){o(a?a.value:null)})}),e.on("config:clearConfigStore",function(n,a){o.dropDatabase(function(n){a(n)})}),e.on("stop",function(){o.close()}),e.ready()}),e.on("stop",function(){e.disconnect()})}();