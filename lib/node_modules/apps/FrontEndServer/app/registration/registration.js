var registration=require("apps/Registration/Client"),dataManager=require("apps/DataManager/Client"),setup=function(t,e){e.registrationClient=registration.create(t);var n=dataManager.create(t);e.registrationState=function(){var n;return e.registrationClient.on("stateChanged",function(e){t.info("Registration state changed.",e),n=e}),function(){return n}}(),e.setupState=function(){var n;return e.registrationClient.on("setupStateChanged",function(e){t.info("Setup state changed.",e),n=e}),function(){return n}}(),e.isRegistered=function(){return e.registrationClient.isRegistered(e.registrationState())},e.getRegistrationExpired=function(t){e.registrationClient.getRegistrationExpired(function(e){t(e)})},e.isSetupInProgress=function(){return e.registrationClient.isSetupInProgress(e.setupState())||e.registrationClient.isSetupInProgressCopying(e.setupState())},e.isSetupInProgressSyncing=function(){return e.registrationClient.isSetupInProgressSyncing(e.setupState())},e.isSetupInWiping=function(){return e.registrationClient.isSetupInWiping(e.setupState())},e.isSetupInWipingFailure=function(){return e.registrationClient.isSetupInWipingFailure(e.setupState())},e.isSetup=function(){return e.registrationClient.isSetup(e.setupState())};var i=!1;n.on("outOfSpace",function(){i=!0}),e.isOutOfSpace=function(){return i}};module.exports=setup;