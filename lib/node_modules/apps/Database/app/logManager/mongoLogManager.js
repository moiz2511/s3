!function(){"use strict";function n(n,u){var c=u.admin(),m=1048576;i.watchFile(t.join(o.mongoLogs,"mongo.log"),function(n){n.size>m&&i.readdir(o.mongoLogs,function(n,u){e.map(u,function(n,e){i.stat(t.join(o.mongoLogs,n),function(i,r){var u={mtime:r.mtime,path:t.join(o.mongoLogs,n)};e(i,u)})},function(n,o){var t=r.sortBy(o,function(n){return-n.mtime});e.each(r.rest(t,10),function(n,o){i.unlink(n.path,function(n){o()})},function(){c.command({logRotate:1},function(n){})})})})}),n.on("stop",function(){i.unwatchFile(t.join(o.mongoLogs,"mongo.log"))})}var o=require("Environment"),i=require("fs"),t=require("path"),e=require("async"),r=require("underscore");module.exports=n}();