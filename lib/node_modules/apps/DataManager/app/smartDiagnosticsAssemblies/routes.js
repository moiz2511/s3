!function(){"use strict";var e=require("underscore"),s=require("Middleware/acceptsCheck.js"),a=require("express"),d=require("../dataProviders/SmartDiagnosticsAssembliesDataProvider.js"),i=function(i,r,t){var n=new d(i,r.database),o=require("./service.js").getSmartDiagnosticsAssembliesService(i,r,n),c=r.webServer;c.get("/SAWeb/services/boxes/sdaUpdates/updateSda",s("application/vnd.johndeere.sa.updateSda.v1+json"),function(s,a){var d=s.headers["x-user"];o.updatePayloadData(d,function(s,i,r){s?a.send(500):o.performDbOperations(d,i,r,function(){n.getSdaFiles([],function(s,d){if(s)a.send(500);else{var i=e.chain(d).map(function(e){return{sdaFileName:e.sdaFileName,dateRequested:e.dateRequested,dateModified:e.dateModified,sdaFileSize:e.sdaFileSize}}).value();a.send(i)}})})})}),c.post("/SAWeb/services/boxes/deleteSDA",a.json(),function(e,s){var a=e.body.sdaName,d=e.accepts("application/vnd.johndeere.sa.deleteSDA.v1+json");return d?void o.deleteSDA([{fileName:a}],function(e){e?(i.error("Error occurred in deleting SDA: ",a,e),s.send(200,"Failed")):s.send(200,"Success")}):void s.send(406)}),t()};module.exports=i}();