"use strict";var _=require("underscore"),TriggerTemplate=function(e,t){this._app=e,this._db=t};TriggerTemplate.prototype.getCollection=function(){return"TriggerTemplates"},TriggerTemplate.prototype.getType=function(){return"TriggerTemplate"},TriggerTemplate.prototype.validateNewData=function(e,t){t(void 0,e)},TriggerTemplate.prototype.validateUpdate=function(e,t,r){r(new Error("Trigger Templates cannot be updated."))},TriggerTemplate.prototype.compactData=function(e,t,r){return e||_.isArray(t)&&0!==t.length?(t=_sortStateChanges(t),e=e||{},_.each(t,function(t){switch(t.action){case"add":e=t.dataObject;break;case"delete":e=void 0}}),void r(void 0,e)):void r(new Error("No data to compact."))},TriggerTemplate.prototype.applyQuery=function(e,t,r){t.idsOnly&&(e=_.pluck("localId")),r(void 0,e)};var _applySpecificIds=function(e){if(e)return e.boxTriggerTemplateId=e.localId,e.triggerTemplateId=e.id,_.omit(e,"localId","id")},_applyGeneralizedIDs=function(e){if(e)return e.localId=e.boxTriggerTemplateId,e.id=e.triggerTemplateId,_.omit(e,"boxTriggerTemplateId","triggerTemplateId")},_getGroupedStateChanges=function(e){return _.values(_.groupBy(e,function(e){return e.localId}))},_sortStateChanges=function(e){return _.sortBy(e,"index")};TriggerTemplate.prototype.formatUploadBoxStateMessage=function(e,t){t()},TriggerTemplate.prototype.createUpdates=function(e,t,r,o){o()},TriggerTemplate.prototype.processUpdatesDuringSync=function(e,t,r,o,a){a()},TriggerTemplate.prototype.processUpdatesAfterSync=function(){},module.exports=TriggerTemplate;