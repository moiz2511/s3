"use strict";var _=require("underscore"),async=require("async"),createQuickSyncSession=function(e,n,i,r,s){var o=e._app;e._dbHelper.createNewSyncSession(r,n,function(n,r){return n?(o.error("QuickSync: Database insert error: ",n),void s(n,r)):r?void e._dbHelper.removePendingSyncs(i||[],function(e){e&&o.error("QuickSync: Clear pending syncs error: ",e),s(e,r)}):(o.error("QuickSyncManager: Creating session failed"),void s(new Error("Creating Session Failed")))})},beginPreRegistrationQuickSyncSession=function(e,n,i,r){var s=e._app;s.info("Beginning quick sync prior to registration."),r(void 0,"InitialQuickSyncSession")},beginPreRegistrationFullSyncSession=function(e,n,i,r){var s=e._app;s.info("Beginning full sync prior to registration."),r(void 0,"InitialFullSyncSession")},createFullSyncSession=function(e,n,i,r,s){var o=e._app;e._dbHelper.createNewSyncSession(r,n,function(n,r){return n?(o.error("FullSync: Database insert error ",n),void s(n)):void e._dbHelper.removePendingSyncs(i||[],function(e){e&&o.error("FullSync: Clear pending syncs error: ",e),s(e,r)})})};exports.beginPreRegistrationQuickSyncSession=beginPreRegistrationQuickSyncSession,exports.createQuickSyncSession=createQuickSyncSession,exports.beginPreRegistrationFullSyncSession=beginPreRegistrationFullSyncSession,exports.createFullSyncSession=createFullSyncSession;