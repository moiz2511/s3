"use strict";var async=require("async"),_=require("underscore"),prepareDataFileUpdates=function(e,a,t){var s=[];_.each(a.deletes,function(e){s.push({type:"dataDelete",completed:!1,updateData:e})}),a.adds=_.chain(a.adds).groupBy(function(e){return e.type}).each(function(e){_.isEmpty(e)||(_.first(e).isFirstOfType=!0,_.last(e).isLastOfType=!0)}).toArray().flatten(!0).value(),_.each(a.adds,function(e){e.baseURL=a.baseURL,s.push({type:"dataAdd",completed:!1,updateData:e})}),t(void 0,s)};exports.prepareDataFileUpdates=prepareDataFileUpdates;