"use strict";var _=require("underscore"),quickSyncWithCallback=function(n,c){c=_.once(c),n.startQuickSync(function(i,e){return i?void c(i):void bindQuickSyncComplete(e,n,c)})},bindQuickSyncComplete=function(n,c,i){i=_.once(i);var e=function(c){n===c&&(i(),r())},o=function(c){if(n===c){var e=new Error('Received a "quickSyncError" event. Was expecting "quickSyncFinished"');i(e),r()}},r=function(){c.removeListener("quickSyncFinished",e),c.removeListener("quickSyncError",o)};c.on("quickSyncFinished",e),c.on("quickSyncError",o)},onQuickSyncComplete=function(n,c){var i,e=function(n){i=n},o=function(n){n===i&&(c(),t())},r=function(e){e===i&&(t(),onQuickSyncComplete(n,c))};n.on("quickSyncStarted",e),n.on("quickSyncFinished",o),n.on("quickSyncError",r);var t=function(){n.removeListener("quickSyncStarted",e),n.removeListener("quickSyncFinished",o),n.removeListener("quickSyncError",r)}};exports.quickSyncWithCallback=quickSyncWithCallback,exports.bindQuickSyncComplete=bindQuickSyncComplete,exports.onAnyQuickSyncComplete=onQuickSyncComplete;