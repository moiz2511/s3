!function(){var e=require("Environment"),n=require(e.getLocalAddonPath("SystemInfo")),r=(require("underscore"),require("Protocol"));module.exports=function(a,i){var o=function(){var t=n.getDiskSpace(e.dataDrive),c=function(){setTimeout(o,60*e.checkMinimumSpaceRateInMinutes*1e3).unref()};t.totalFreeSpaceInKB<0?(a.error("Failed to check remaining disk space"),c()):t.totalFreeSpaceInKB<e.minimumSpaceRemainingThresholdInKB?(a.info("Minimum space remaining threshold has been exceeded. Free space in KB: "+t.totalFreeSpaceInKB+", minimum threshold in KB: "+e.minimumSpaceRemainingThresholdInKB),i.ONEManager.sendNoSpaceErrorMessage(),a.broadcast(r.outOfSpace)):c()};a.on("start",o),i.onReady()}}();