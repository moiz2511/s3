"use strict";var express=require("express"),acceptsCheck=require("Middleware/acceptsCheck.js"),LanguageProvider=require("../dataProviders/LanguageProvider.js"),_=require("underscore"),setup=function(e,a){var r=a.onReady,n=a.webServer,t=new LanguageProvider(e,a.databaseManager,a.registrationClient);n.get("/SAWeb/services/languagelists/:languageCode",express.json(),acceptsCheck("application/vnd.johndeere.sa.languagelists.v1+json"),function(a,r){var n=a.params.languageCode;n||(n="en"),r.set("Content-Type","application/json"),t.getLanguageList(function(a,t){return a||!t?(r.send(500,"Internal Server Error"),void e.error("An error occurred while getting the language list. ",a)):void r.send(200,{application:t.application,data:t.data&&t.data[n]})})}),n.get("/SAWeb/services/dataFencing/requiredManualLanguage",express.json(),acceptsCheck("application/vnd.johndeere.sa.Datafencing.requiredManualLanguage.v1+json"),function(a,r){r.set("Content-Type","application/json"),t.getRegionalLanguages(a.headers["x-user"],function(a,n){return a?(r.send(500,"Internal Server Error"),void e.error("An error occurred while getting the required manual language list. ",a)):void r.send(200,{languageList:_.map(n,function(e){return{languageCode:e}})})})}),r()};module.exports=setup;