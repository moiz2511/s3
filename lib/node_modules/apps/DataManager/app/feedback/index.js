"use strict";var feedbackOps=require("./feedbackOperations"),async=require("async"),protocol=require("Protocol"),setup=function(e,o){var r=o.connectorClient,n=o.database,a=o.networkContext;r.on("networkConnected",function(){feedbackOps.upload(n,a,function(o,r){o?e.error("Error Uploading Feedback: ",o):r>0&&e.info("Successfully uploaded feedback, ",r," item(s) were uploaded.")})}),e.on(protocol.saveFeedback,function(o,r){feedbackOps.save(n,o,function(o){r(o),feedbackOps.upload(n,a,function(o,r){o?e.error("Error Uploading Feedback: ",o):r>0&&e.info("Successfully uploaded feedback, ",r," item(s) were uploaded.")})})}),o.onReady()};module.exports=setup;