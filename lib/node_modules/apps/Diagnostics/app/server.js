!function(){"use strict";var e=require("http"),r=(require("url"),require("events")),s=require("mkdirp"),n=require("BoxApplication"),i=require("Server"),o=require("apps/FrontEndServer/Client"),t=require("apps/DataPaths/Client"),a=require("apps/DataManager/Client"),c=(require("TarIndexManager"),require("Environment")),d=require("FileUtility"),u=require("./config.js"),l=n(u),p=new r.EventEmitter,v=i.createServer(module,u,[]),S={config:u,webServer:v,appEvents:p,offlineUrl:o.getOfflineUrl(),dataManagerClient:a};t.create(l,function(r,n){if(r)return void l.ready(r);try{var i=n.getTarIndexManager()}catch(e){return void l.ready(e)}S.dataPathsClient=n,S.tarIndexManager=i,s.sync(c.temporarySnapshotsPath),d.clearDirectory(c.temporarySnapshotsPath,function(e){e&&l.error("Failed to clear snapshots directory",e)}),l.use(["./cal/index.js","./referenceData/routes.js","./diagnostics/routes.js","./liveDiagnosticActivities/index.js","./recordingPlayback/routes.js","./exportRecording/routes.js","./dtcInfo/routes.js","./resourceManager"],module,S);var t=e.createServer(v);t.listen(0,"127.0.0.1",function(e){e?process.exit(1):a(function(){l.ready()})});var a=function(e){var r=o.create(l);r.addNamespace("/diagnostics"),o.mount(l,t,function(r){var s={headers:"X-Requested-With, Content-Type, X-JobId, X-HybridSession, X-Clear-Message"},n={headers:"X-Requested-With, Content-Type, X-HybridSession",methods:"GET, OPTIONS"},i={methods:"GET"},o={headers:"X-Requested-With, Content-Type, X-HybridSession"};r("/SAWeb/services/diagnostics/dataPointsAndProceduresReference",{noSession:!0,allowUnauthorized:!0,cacheable:!0,corsOptions:i}),r("/SAWeb/services/diagnostics",{noSession:!0,allowUnauthorized:!0,corsOptions:s}),r("/SAWeb/services/diagnostics/",{noSession:!0,allowUnauthorized:!0,corsOptions:s}),r("/SAWeb/services/diagnostics/*",{noSession:!0,allowUnauthorized:!0,corsOptions:s}),r("/SAWeb/services/Recordingservice/*",{noSession:!0,allowUnauthorized:!0,corsOptions:o}),r("/SAWeb/services/recordings/*",{noSession:!0,allowUnauthorized:!0,corsOptions:n}),r("/SAWeb/services/recording"),r("/SAWeb/services/recordingDetails/*",{noSession:!0,allowUnauthorized:!0,corsOptions:n}),r("/SAWeb/services/DTCInfo/*"),e()})};l.on("start",function(){p.emit("start")}),l.on("stop",function(){t.close(),p.emit("stop")})}),l.on("stop",function(){l.disconnect()}),process.on("SIGINT",function(){})}();