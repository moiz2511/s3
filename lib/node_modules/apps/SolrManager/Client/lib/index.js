!function(){"use strict";var e=(require("util"),require("Protocol")),t=function(t){var r=this;this._ipcClient=t,this._mergeIndexRequests=0,this._mergeRequestCallbacks={},t.on(e.mergeProgress,function(e){r._mergeRequestCallbacks[e.requestId]&&r._mergeRequestCallbacks[e.requestId](e.progress)})};t.prototype.mergePartialIndex=function(t,r,s,i,n){n||(n=i,i=!1),this._ipcClient.request(e.mergePartialIndex,{filePath:t,coreType:r,dataId:s,useSoftCommit:i},n)},t.prototype.mergeCompressedIndex=function(t,r,s,i){var n=this,o=n._mergeIndexRequests+=1;n._mergeRequestCallbacks[o]=s,n._ipcClient.request(e.mergeCompressedIndex,{filePath:t,coreType:r,requestId:o},function(){delete n._mergeRequestCallbacks[o],i.apply(n,arguments)})},t.prototype.mergeIndex=function(t,r,s,i,n,o){void 0===o&&(o=n,n=function(){});var a=this,c=this._mergeIndexRequests+=1;this._mergeRequestCallbacks[c]=n,this._ipcClient.request(e.mergeIndex,{filePath:t,coreType:r,isPartialIndex:s,dataId:i,requestId:c},function(){delete a._mergeRequestCallbacks[c],o.apply(this,arguments)})},t.prototype.deleteIndex=function(t,r,s){this._ipcClient.request(e.deleteIndex,{deletedBooks:t,coreType:r},s)},t.prototype.createJobsIndex=function(t){this._ipcClient.request(e.createJobsIndex,t)},t.prototype.clearIndexes=function(t){this._ipcClient.request(e.clearIndexes,t)},t.prototype.reloadCore=function(t,r){this._ipcClient.request(e.reloadCore,{coreType:t},r)};var r=function(e){return new t(e)};exports.create=r}();