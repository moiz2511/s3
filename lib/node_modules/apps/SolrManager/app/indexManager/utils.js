"use strict";var config=require("../config.js"),url=require("url"),_=require("underscore"),buildMergeUrl=function(e,t){return{protocol:config.protocol,hostname:config.hostname,port:config.port,pathname:config.urlBegin,query:{action:"mergeindexes",core:t,wt:"json",indexDir:e}}},buildCommitUrl=function(e,t){var o;switch(e){case"Solutions":o=config.solutionsUpdateUrl;break;case"Manuals":o=config.manualsUpdateUrl;break;default:return}return{protocol:config.protocol,hostname:config.hostname,port:config.port,pathname:o,query:{commit:!0,softCommit:t,wt:"json"}}},buildSelectUrl=function(e,t){var o={protocol:config.protocol,hostname:config.hostname,port:config.port,query:{q:"*:*",rows:1,wt:"json",indent:!0}},r=function(e,t){return e+":("+t+")"},n=function(t){e=_.isArray(e)?'"'+e.join('" "')+'"':'"'+e+'"',o.query.fq=r(t,e)};switch(t){case"Solutions":o.pathname=config.selectSolutionsUrl,n("solution_id");break;case"Manuals":o.pathname=config.selectManualsUrl,n("bookId");break;case"Jobs":return;default:return}return o},getSelectRequestFunction=function(e,t){return function(o){e.get({url:t},function(e,t){o(e,t)})}},getTimer=function(e){var t=new Date;return{expired:function(){return new Date-t>e}}};exports.buildSelectUrl=buildSelectUrl,exports.getSelectRequestFunction=getSelectRequestFunction,exports.buildCommitUrl=buildCommitUrl,exports.buildMergeUrl=buildMergeUrl,exports.getTimer=getTimer;