!function(){"use strict";var e=require("underscore"),r=require("./boxAlert/boxAlertManager.js"),t=require("./boxAlertAccumulator/accumulator.js"),o=require("./boxAlertAccumulator/alertDataProvider.js"),a=require("mongodb"),n=function(n,u){a.connect("mongodb://localhost/Alerts",function(a,l){var c=o({database:l}),i=new t(n,c),s=[{path:"./boxAlert/events.js",initData:new r(n,i)},{path:"./boxAlertAccumulator/routes.js",initData:{webServer:u.webServer,getAlerts:i.getAlerts,onAlertDelivered:i.onAlertDelivered}}];e.each(s,function(e){n.use([e.path],module,e.initData)}),n.on("stop",function(){l.close()})})};module.exports=n}();