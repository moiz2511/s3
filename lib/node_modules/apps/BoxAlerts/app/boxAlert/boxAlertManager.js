!function(){"use strict";var r=require("underscore"),e=require("uuid"),t=function(r,e){this._app=r,this._accumulator=e};t.prototype.sendAlert=function(t,i){i=i||function(){};var n=this._accumulator,o=this._app;if(!r.isObject(t))return void i(void 0,new Error("Bad Input: Invalid Alert Object"));if(!t.applicationId)return void i(void 0,new Error("Bad Input: Missing Application Id"));if(!t.alertId)return void i(void 0,new Error("Bad Input: Missing Alert Id"));if(t.users&&r.isEmpty(t.users))return void i(void 0,new Error("Bad Input: Empty users"));var a=e.v4(),s={alertReferenceId:a,applicationId:t.applicationId,alertId:t.alertId,alertDetails:t.alertDetails||{},persistent:t.persistent||!1,isDelivered:!1};t.users&&(s.users=t.users),n.saveAlert(s,function(r){r&&(a=void 0,o.error(r)),i(a,r)})},t.prototype.cancelAlert=function(r,e){if(e=e||function(){},!r)return void e(new Error("Bad Input: Invalid Alert Reference Id"));var t=this._accumulator,i=this._app;t.removeAlert(r,function(r){r&&i.error(r),e(r)})},module.exports=t}();