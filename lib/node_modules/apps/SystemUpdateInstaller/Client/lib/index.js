!function(){"use strict";var t=require("util"),e=require("Protocol"),n=require("events"),i=function(t){n.EventEmitter.call(this),this._ipcClient=t;var i=this;t.on(e.emitInstallationBegan,function(t){i.emit("installationStarted",t)}),t.on(e.emitNewVersion,function(t){i.emit("newInstallationVersion",t)}),t.on(e.installationComplete,function(t){i.emit("installationComplete",t.newVersion,t.previousVersion)}),t.on(e.reInstallationComplete,function(){i.emit("reInstallationComplete")}),t.on(e.emitInstalledVersion,function(t){i.emit("installedVersion",t)})};t.inherits(i,n.EventEmitter),i.prototype.newSoftwareUpdate=function(t,n,i){var o={newVersion:t,isSoftwareUpdateCritical:n};this._ipcClient.request(e.newSoftwareUpdate,o,i)},i.prototype.getInstallationDisposition=function(t){this._ipcClient.request(e.getInstallationDisposition,t)},i.prototype.installationComplete=function(t,n){this._ipcClient.broadcast(e.installationComplete,{previousVersion:n,newVersion:t})},i.prototype.reInstallationComplete=function(){this._ipcClient.broadcast(e.reInstallationComplete)};var o=function(t){return new i(t)};exports.create=o}();