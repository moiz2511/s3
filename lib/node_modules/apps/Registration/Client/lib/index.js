!function(){"use strict";var t=require("events"),e=require("util"),n=require("async"),r=require("Protocol"),o=function(e){t.EventEmitter.call(this),this._ipcClient=e;var n=this;e.on(r.registrationStateChanged,function(t){n.emit("stateChanged",t.state,t.prevState)}),e.on(r.clockStateChanged,function(t){n.emit("clockStateChanged",t.state,t.prevState)}),e.on(r.boxIdChanged,function(t){n.emit("boxIdChanged",t.boxId,t.prevBoxId)}),e.on(r.setupStateChanged,function(t){n.emit("setupStateChanged",t.state,t.prevState)}),e.on(r.authorizationStateChanged,function(t){n.emit("authorizationStateChanged",t.authorizationState,t.prevAuthorizationState)}),e.on(r.accessTokenChanged,function(t){n.emit("accessTokenChanged",t.accessToken,t.prevAccessToken)}),e.on(r.authorizationExpirationChanged,function(t){n.emit("authorizationExpirationChanged",t.authorizationExpiration,t.prevAuthorizationExpiration)}),e.on(r.userTypeChanged,function(t){n.emit("userTypeChanged",t.userType,t.prevUserType)})};e.inherits(o,t.EventEmitter),o.prototype.getBoxId=function(t){this._ipcClient.request(r.boxId,t)},o.prototype.setBoxId=function(t,e){this._ipcClient.request(r.setBoxId,t,e)},o.prototype.getRegistrationState=function(t){this._ipcClient.request(r.getRegistrationState,t)},o.prototype.setRegistrationState=function(t,e){this._ipcClient.request(r.setRegistrationState,t,e)},o.prototype.isRegistered=function(t){return t===r.state.registered},o.prototype.isUnregistered=function(t){return t===r.state.unregistered},o.prototype.getRegisteredState=function(){return r.state.registered},o.prototype.getUnregisteredState=function(){return r.state.unregistered},o.prototype.getSetupState=function(t){this._ipcClient.request(r.getSetupState,function(e){t(e.state,e.errCode)})},o.prototype.setSetupState=function(t,e,n){n||(n=e,e=void 0);var o={state:t,errCode:e};this._ipcClient.request(r.setSetupState,o,n)},o.prototype.isSetupInProgress=function(t){return t===r.setupState.setupInProgress},o.prototype.isSetupInProgressError=function(t){return t===r.setupState.setupInProgressError},o.prototype.isSetupInProgressReady=function(t){return t===r.setupState.setupInProgressReady},o.prototype.isSetupInProgressCopying=function(t){return t===r.setupState.setupInProgressCopying},o.prototype.isSetupInProgressSyncing=function(t){return t===r.setupState.setupInProgressSyncing},o.prototype.isSetupInProgressSyncingError=function(t){return t===r.setupState.setupInProgressSyncingError},o.prototype.isSetupStartOver=function(t){return t===r.setupState.setupStartOver},o.prototype.isSetupInWiping=function(t){return t===r.setupState.setupInWiping},o.prototype.isSetupInWipingFailure=function(t){return t===r.setupState.setupInWipingFailure},o.prototype.isSetup=function(t){return t===r.setupState.setup},o.prototype.isNotSetup=function(t){return t===r.setupState.notSetup},o.prototype.isSetupPendingIdentifiedSync=function(t){return t===r.setupState.setupPendingIdentifiedSync},o.prototype.getIsSetupState=function(){return r.setupState.setup},o.prototype.getIsNotSetupState=function(){return r.setupState.notSetup},o.prototype.getSetupPendingIdentifiedSyncState=function(){return r.setupState.setupPendingIdentifiedSync},o.prototype.getSetupInProgressState=function(){return r.setupState.setupInProgress},o.prototype.getSetupInProgressErrorState=function(){return r.setupState.setupInProgressError},o.prototype.getSetupInProgressReadyState=function(){return r.setupState.setupInProgressReady},o.prototype.getSetupInProgressCopyingState=function(){return r.setupState.setupInProgressCopying},o.prototype.getSetupInProgressSyncingState=function(){return r.setupState.setupInProgressSyncing},o.prototype.getSetupInProgressSyncingErrorState=function(){return r.setupState.setupInProgressSyncingError},o.prototype.getSetupStartOverState=function(){return r.setupState.setupStartOver},o.prototype.getSetupInWipingState=function(){return r.setupState.setupInWiping},o.prototype.getSetupInWipingFailureState=function(){return r.setupState.setupInWipingFailure},o.prototype.updateLoggedInTimeStamp=function(t){this._ipcClient.request(r.updateLoggedInTimeStamp,t)},o.prototype.getDaysUntilRegistrationExpires=function(t){this._ipcClient.request(r.getDaysUntilRegistrationExpires,t)},o.prototype.getRegistrationExpired=function(t){this._ipcClient.request(r.getRegistrationExpired,t)},o.prototype.setLastLoggedInUser=function(t,e){this._ipcClient.request(r.setLastLoggedInUser,t,e)},o.prototype.getLastLoggedInUser=function(t){this._ipcClient.request(r.getLastLoggedInUser,t)},o.prototype.getAccessToken=function(t){this._ipcClient.request(r.getAccessToken,t)},o.prototype.getAuthorizationExpiration=function(t){this._ipcClient.request(r.getAuthorizationExpiration,t)},o.prototype.getAuthorizationState=function(t){this._ipcClient.request(r.getAuthorizationState,t)},o.prototype.getAuthorizedState=function(){return r.authorizationState.authorized},o.prototype.getUnauthorizedState=function(){return r.authorizationState.unauthorized},o.prototype.getDaysUntilAuthorizationExpires=function(t){this._ipcClient.request(r.getDaysUntilAuthorizationExpires,t)},o.prototype.getRefreshToken=function(t,e){this._ipcClient.request(r.getRefreshToken,t,e)},o.prototype.setAccessToken=function(t,e){this._ipcClient.request(r.setAccessToken,t,e)},o.prototype.setAuthorizationExpirationTimestamp=function(t,e){this._ipcClient.request(r.setAuthorizationExpirationTimestamp,t,e)},o.prototype.setAuthorizationState=function(t,e){this._ipcClient.request(r.setAuthorizationState,t,e)},o.prototype.setRefreshToken=function(t,e){this._ipcClient.request(r.setRefreshToken,t,e)},o.prototype.updateAuthorizationDetails=function(t,e,r){var o=this;n.series([function(e){o.setAccessToken(t.access_token,e)},function(t){o.setAuthorizationExpirationTimestamp(e,t)},function(e){o.setRefreshToken(t.refresh_token,e)},function(t){o.setAuthorizationState(o.getAuthorizedState(),t)}],function(t){r(t)})},o.prototype.setUserType=function(t,e){this._ipcClient.request(r.setUserType,t,e)},o.prototype.getUserType=function(t){this._ipcClient.request(r.getUserType,t)};var i=function(t){return new o(t)};exports.create=i}();