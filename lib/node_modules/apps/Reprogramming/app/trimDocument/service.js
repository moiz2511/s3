!function(){"use strict";var i,r,n=require("underscore"),e=require("fs"),t=require("path"),o=require("mkdirp"),u=require("Environment"),c=require("express"),s=n.once(function(n,e){i=n.box,r=n.serverApp,e(!0)}),a=function(i,s){if(!i)return void s(!1);n.isFunction(s)||(s=function(){});var a=[u.dataRoot,"tempReprogramming","trimDocument",i].join("/");o(a,function(i){if(i)return void s(!1,i)}),this.writeFile=function(n,o,u){var s=i+".json";e.writeFile(t.join(a,s),o,function(i){if(i)return void u(!1)});var f=i+".html";e.writeFile(t.join(a,f),n,function(n){return n?void u(!1):(r.use("/SAWeb/reprogram/"+i,c.static(a)),void u(!0,["/SAWeb/reprogram",i,f].join("/")))})},this.onUserInput=function(r){r===i&&!function i(r){e.existsSync(r)&&(e.readdirSync(r).forEach(function(n,t){var o=r+"/"+n;e.lstatSync(o).isDirectory()?i(o):e.unlinkSync(o)}),e.rmdirSync(r))}(a)},s(!0,a)};module.exports={name:"TrimDocumentService",initialize:s,getTrimDocumentService:function(i,r){return new a(i,r)}}}();