var ipcFramework=require("IpcFramework"),_=require("underscore"),resourceClient=require("../../apps/ExclusiveResourceManager/Client"),ipcClient=new ipcFramework.IpcClient,args=process.argv.slice(2);console.log(args);var app=args[1],resources=_.rest(args,2),client=resourceClient.create(ipcClient,app);"use"===args[0]?client.useResources(resources,function(e){e?console.log("resource claim failed: "+e,e):console.log("resource claim succeeded"),ipcClient.disconnect()}):"release"===args[0]&&(client.on("resourcesReleased",function(e){console.log("got resources released, ",e)}),client.releaseResources(resources),_.delay(function(){ipcClient.disconnect()},1e3));